<% content_for :stylesheet do %>
  <%= stylesheet_link_tag 'dataTables/jquery.dataTables' %>
<% end %>

<h1><%= t '.title' %></h1>

<table id="grid" class="table table-condensed table-hover table-striped">
  <thead>
    <tr>
      <th><%= t('activerecord.attributes.user.first_name') %></th>
      <th><%= t('activerecord.attributes.user.last_name') %></th>
      <th>Email</th>
      <th><%= t('actions') %></th>
      <!--glyphicon glyphicon-edit
      glyphicon glyphicon-trash
      glyphicon glyphicon-eye-open
      -->
    </tr>
  </thead>
</table>

<% content_for :script do %>
  <%= javascript_include_tag 'dataTables/jquery.dataTables' %>
<% end %>

<script type="text/javascript">
  $(document).ready(function () {
    configDataTables['ajax'] = '/users.json';
    configDataTables['columns'] = [
      {data: 'first_name'},
      {data: 'last_name'},
      {data: 'email'},
      {data: 'id'}
    ];
    configDataTables['aoColumnDefs'] = [
      { "aTargets": [ 3 ], 
        "mRender": function ( data, type, full ) { 
          return '<a href="/users/' + data + '" class="btn btn-primary btn-xs">'
            + '<span class="glyphicon glyphicon-eye-open"></span></a>'
            + ' <a href="/users/' + data + '/edit" class="btn btn-primary btn-xs">'
            + '<span class="glyphicon glyphicon-edit"></a>'
            + ' <a href="#" class="btn btn-danger btn-xs">'
            + '<span class="glyphicon glyphicon-trash"></span></a>';
        }
      }
    ];

    $('#grid').DataTable(configDataTables);

    $('#grid_wrapper').addClass('form-inline');
    $('input[type="search"]').addClass('form-control');
    $('[name="grid_length"]').addClass('form-control');
  });

</script>